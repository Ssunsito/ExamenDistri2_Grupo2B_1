<!-- *****************************************************
Proyecto Distri2 - Reserva.co
Vista _HistorialTabla.cshtml
Kenneth Andrés Pantoja Manobanda
Santiago Pila
Fecha: 03/08/2025

// RESULTADOS FINALES
- Se implementó visualización tabular de reservas con formato personalizado
- Se integró sistema de paginación dinámica con AJAX
- Se estableció manejo de casos sin registros
- Se implementó formateo de fechas en español
- Se centralizó la visualización de estados de reserva

// CONCLUSIONES
1. La tabla proporciona una visualización clara y organizada de las reservas
2. El sistema de paginación mejora la experiencia del usuario
3. El manejo de casos sin registros mejora la usabilidad
4. El formateo de fechas facilita la lectura
5. La estructura de la tabla optimiza la presentación de datos
    ***************************************************** -->


@model List<ProyectoDistri2.Models.Reserva>

<table class="table-modern">
    <thead>
        <tr>
            <th>ID</th>
            <th>Espacio</th>
            <th>Fecha Inicio</th>
            <th>Fecha Fin</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var r in Model)
        {
            <tr>
                <td>@r.Id</td>
                <td>@(r.Espacio?.Nombre) (@(r.Espacio?.Tipo))</td>
                <td>@r.FechaInicio.ToString("dd/MM/yyyy HH:mm")</td>
                <td>@r.FechaFin.ToString("dd/MM/yyyy HH:mm")</td>
                <td class="estado-@r.Estado">@r.Estado</td>
            </tr>
        }
        @if (!Model.Any())
        {
            <tr>
                <td colspan="5" class="text-center text-muted">
                    No hay reservas con los filtros seleccionados.
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- 🔹 Paginación AJAX -->
@if (ViewBag.TotalRegistros > ViewBag.PageSize)
{
    int totalPaginas = (int)Math.Ceiling((decimal)ViewBag.TotalRegistros / ViewBag.PageSize);
    <nav class="pagination-container mt-3">
        <ul class="pagination justify-content-center">
            @for (int i = 1; i <= totalPaginas; i++)
            {
                <li class="page-item @(ViewBag.Page == i ? "active" : "")">
                    <a class="page-link" href="#" onclick="cambiarPagina(@i); return false;">@i</a>
                </li>
            }
        </ul>
    </nav>
}
